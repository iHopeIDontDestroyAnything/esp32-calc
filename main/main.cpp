#include "display.h"
#include "program.h"
#include "event/event.h"
#include "event/key_event.h"

static const unsigned char folderBitArray[] =
{
0x7f, 0xe0, 0x00, 0x00, 0x80, 0x10, 0x00, 0x00, 0x80, 0x10, 0x00, 0x00, 0x80, 0x1f, 0xff, 0x80, 
0x80, 0x0f, 0xff, 0xc0, 0x80, 0x00, 0x00, 0x40, 0x80, 0x00, 0x00, 0x40, 0x80, 0x00, 0x00, 0x40, 
0x87, 0xff, 0xff, 0xf8, 0x8f, 0xff, 0xff, 0xfc, 0x88, 0x00, 0x00, 0x04, 0x98, 0x00, 0x00, 0x0c, 
0x90, 0x00, 0x00, 0x08, 0xb0, 0x00, 0x00, 0x18, 0xa0, 0x00, 0x00, 0x10, 0xe0, 0x00, 0x00, 0x10, 
0xe0, 0x00, 0x00, 0x30, 0xc0, 0x00, 0x00, 0x20, 0xc0, 0x00, 0x00, 0x60, 0xff, 0xff, 0xff, 0xc0, 
0x3f, 0xff, 0xff, 0x00
};

extern "C"
{
#include <stdio.h>
void app_main(void);
}


void app_main()   {                
  jalc::KeyEventHandler *keh = new jalc::KeyEventHandler;
  jalc::EventHandler *eh = new jalc::EventHandler;
  jalc::Display display;
  jalc::Program * currentApp = new jalc::ProgramMenu(display);

  for(;;)
  {
    jalc::CacheKeyEvents(*eh, *keh);
    currentApp->OnUpdate(*eh, *keh);
    currentApp->OnDraw();
    delay(10);
  }

  delete currentApp;
  delete eh;
  delete keh;

}

